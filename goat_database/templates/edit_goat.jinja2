{% extends "goat_database:templates/layout.jinja2" %}

{% block content %}

    <form action="{{ request.route_url('goat_action',action=action) }}" method="post" class="form"
          enctype="multipart/form-data">
        {% if action =='edit' %}
            {{ form.id() }}
        {% endif %}

        {% for error in form.name.errors %}
            <div class="error">{{ error }}</div>
        {% endfor %}

        <div class="form-group">
            <label for="name">{{ form.name.label }}</label>
            {{ form.name(class_='form-control') }}
        </div>

        {% for error in form.birth_place.errors %}
            <div class="error">{{ error }}</div>
        {% endfor %}

        <div class="form-group">
            <label for="birth_place">{{ form.birth_place.label }}</label>
            {{ form.birth_place(class_='form-control') }}
        </div>

        {% for error in form.date_of_birth.errors %}
            <div class="error">{{ error }}</div>
        {% endfor %}

        <div class="form-group">
            <label for="date_of_birth">{{ form.date_of_birth.label }}</label>
            <!-- type делаем пустым т.к. используем jQuery календарь, иначе в хроме
                 работает html5 календарь, а в лисе он не работает-->
            {{ form.date_of_birth(class_='form-control', type='') }}
        </div>

        <div class="form-group">
            <label for="breed">{{ form.breed.label }}</label>
            {{ form.breed(class_='form-control') }}
        </div>

        <div class="form-group">
            <label for="gender">{{ form.gender.label }}</label>
            {{ form.gender(class_='form-control') }}
        </div>

        <div class="form-group">
            <label for="mother">{{ form.mother.label }}</label>
            {{ form.mother(class_='form-control') }}
        </div>

        <div class="form-group">
            <label for="father">{{ form.father.label }}</label>
            {{ form.father(class_='form-control') }}
        </div>

        <div class="form-group">
            <label for="photo">{{ form.photo.label }}</label>
            {{ form.photo(class_='form-control') }}
            {#        <input type='file' id='photo' name='photo' onchange="readURL(this);" />#}
            {#        <img id="blah" src="#" alt="{{ request.static_url('goat_database:static/img/' + form.name.data + '/') }}" />#}
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-default">Подтвердить</button>
        </div>

    </form>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="{{ request.static_url('goat_database:static/js/datepicker.js') }}"></script>
    <script type="text/javascript">
        $("#datepicker").datepicker({dateFormat: "dd.mm.yy"});
        {##}
        {#     function readURL(input) {#}
        {#            if (input.files && input.files[0]) {#}
        {#                var reader = new FileReader();#}
        {##}
        {#                reader.onload = function (e) {#}
        {#                    $('#blah')#}
        {#                        .attr('src', e.target.result)#}
        {#                        .width(150)#}
        {#                        .height(150);#}
        {#                };#}
        {##}
        {#                reader.readAsDataURL(input.files[0]);#}
        {#            }#}
        {#        }#}
    </script>
    <p><a href="{{ request.route_url('home') }}">Go Back</a></p>
{% endblock %}
